<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CMNK Staking</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
body {
  background:#081c3a;
  color:#fff;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.box {
  background:#0f2b55;
  padding:30px;
  border-radius:15px;
  text-align:center;
  width:360px;
}
button {
  width:100%;
  padding:15px;
  font-size:16px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  background:#00cfff;
}
.status {
  margin-top:15px;
  opacity:.8;
  word-break:break-all;
}
</style>
</head>

<body>
  <div class="box">
    <h2>CMNK Staking</h2>
    <p>BNB Chain</p>

    <button id="connectBtn">Connect Wallet</button>

    <div class="status" id="status">Wallet disconnected</div>
  </div>

<script>
let provider;
let signer;
let userAddress;

const connectBtn = document.getElementById("connectBtn");
const statusEl = document.getElementById("status");

connectBtn.onclick = async () => {
  try {
    if (!window.ethereum) {
      alert("MetaMask not installed");
      return;
    }

    // ✅ JEDYNA poprawna metoda CONNECT
    const accounts = await window.ethereum.request({
      method: "eth_requestAccounts"
    });

    userAddress = accounts[0];
    provider = new ethers.providers.Web3Provider(window.ethereum);
    signer = provider.getSigner();

    connectBtn.innerText = "Wallet Connected";
    connectBtn.disabled = true;

    statusEl.innerText = "Connected: " + userAddress;

    console.log("✅ Wallet connected:", userAddress);

  } catch (err) {
    console.error(err);
    alert("Connection rejected");
  }
};
</script>
</body>
</html>
